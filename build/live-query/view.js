(()=>{var e={942:(e,t)=>{var s;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=l(e,a(s)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)r.call(e,s)&&e[s]&&(t=l(t,s));return t}function l(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(s=function(){return o}.apply(t,[]))||(e.exports=s)}()}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.domReady;var t=s.n(e);const r=window.wp.element,o=window.wp.apiFetch;var a=s.n(o);const l=window.wp.url;var n=s(942),c=s.n(n);const i=window.ReactJSXRuntime,d=({liveMore:e,liveFilters:t,filters:s,postType:o,limit:n,moreLabel:d,layout:u,hideEmpty:p,initFilters:m})=>{const[h,y]=(0,r.useState)([]),[v,f]=(0,r.useState)(!1),[g,b]=(0,r.useState)(null),[x,j]=(0,r.useState)({}),[w,S]=(0,r.useState)(1),[N,k]=(0,r.useState)(1),[E,O]=(0,r.useState)(0),[L,q]=(0,r.useState)(!0),[_,A]=(0,r.useState)(!0),F=((0,r.useRef)(null),n||6);(0,r.useEffect)(()=>(t?M():b({}),f(!0),document.addEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}),[]),(0,r.useEffect)(()=>{o.length>0&&v&&I(1,!1)},[g]);const M=async()=>{let e={};s&&(e.taxonomies=Object.keys(s)),p&&(e.hide_empty="1"),a()({path:(0,l.addQueryArgs)("/live-query/v1/terms",e)}).then(e=>{const t=e.taxonomyTerms;Object.keys(m).forEach(e=>t[e]=t[e].map(t=>({...t,selected:m[e].includes(t.slug)?1:0}))),b(t),j(Object.fromEntries(Object.keys(e.taxonomyTerms).map(e=>[e,!1])))})},I=async(e=1,t=!1)=>{q(!0);const s=document.body.classList.contains("single"),r=document.body.attributes.class.value.match(/postid-(\d+)/);try{const t={};g&&Object.keys(g).map(e=>{t[e]=[],g[e].forEach(s=>{1===s.selected&&t[e].push(s.slug)})});const n={page:e,per_page:F,post_type:o,...s&&r&&{exclude:r[1]},tax_query:t};a()({path:(0,l.addQueryArgs)("live-query/v1/posts",n)}).then(t=>{k(parseInt(t.total_pages)),O(parseInt(t.total)),S(e),A(!1),y(1===e?t.posts:[...h,...t.posts]),q(!1)})}catch(e){console.error("Error fetching posts:",e)}},P=e=>{const t={},s={...g,...e};Object.keys(s).map(e=>{t[e]=[],s[e].forEach(s=>{1===s.selected&&(t[e]=0===t[e].length?s.slug:t[e]+","+s.slug)})});const r=(0,l.addQueryArgs)(window.location.href.split("?")[0],t);window.history.pushState({},"Page",r)},T=(e,t,s)=>{S(1);const r={};r[e]=g[e].map(e=>e.slug===t?{...e,selected:s?1:0}:e),b({...g,...r}),P({...r})},R=e=>{null===e.target.closest(".filter-select")&&j(Object.fromEntries(Object.keys(x).map(e=>[e,!1])))},C=w<N;return(0,i.jsxs)("div",{children:[t&&(0,r.createPortal)((0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:"posts-header",children:g&&(0,i.jsx)("div",{className:"posts-filters-controls",children:(0,i.jsxs)("div",{className:"live-query-filter-group",children:[!_&&(0,i.jsxs)("span",{className:"posts-results",children:["Showing ",h.length," posts in"]}),Object.keys(g).map(e=>(0,i.jsxs)("div",{className:c()(`filter-${u}`,[`filter-${u}-${e}`],{"filter-expanded":x[e]}),children:[(0,i.jsx)("button",{className:"filter-label",onClick:()=>{"select"===u?j({[e]:!x[e]}):(e=>{S(1);const t={};t[e]=g[e].map(e=>({...e,selected:0})),b({...g,...t}),P({...t})})(e)},children:s[e]?s[e]:"Select an option"}),!0===x[e]&&"select"===u&&(0,i.jsx)("div",{className:"dropdown",children:g[e].map(t=>(0,i.jsxs)("label",{children:[(0,i.jsx)("span",{className:"checkbox-wrapper",children:(0,i.jsx)("input",{type:"checkbox",onChange:()=>T(e,t.slug,!t.selected),checked:1===t.selected,value:"1"})}),(0,i.jsx)("span",{dangerouslySetInnerHTML:{__html:t.name}})]}))}),"list"===u&&g[e].map(t=>(0,i.jsxs)("label",{children:[(0,i.jsx)("span",{className:"checkbox-wrapper",children:(0,i.jsx)("input",{type:"checkbox",onChange:()=>T(e,t.slug,!t.selected),checked:1===t.selected,value:"1"})}),t.name]}))]}))]})})})}),t),e&&(0,r.createPortal)((0,i.jsxs)("div",{className:"live-posts-more",children:[C&&(0,i.jsx)("button",{onClick:()=>{w<N&&I(w+1,!0)},disabled:L,className:"load-more-btn",children:d}),(0,i.jsxs)("p",{children:["Showing ",h.length," out of ",E," posts"]})]}),e),(0,i.jsx)(i.Fragment,{children:L&&0===h.length?(0,i.jsx)("div",{className:"post-loading",children:(0,i.jsx)("div",{className:"post-grid",children:[...Array(n)].map((e,t)=>(0,i.jsx)("div",{className:"post-card loading type-"+o}))})}):0===h.length?(0,i.jsx)("div",{className:"post-no-results",children:(0,i.jsx)("p",{children:"No posts found matching your criteria."})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{className:c()("post-grid",{"in-load-more":L}),children:h.map(e=>(0,i.jsx)("div",{className:"post-card type-"+o,dangerouslySetInnerHTML:{__html:e.formatted}}))})})})]})};function u(e){e.classList.add("has-loaded")}t()(()=>{const e=document.querySelector(".wp-block-scm-live-query"),t=e.querySelector(".wp-block-scm-live-posts");if(t){const s=e.querySelector(".wp-block-scm-live-more"),o=e.querySelector(".wp-block-scm-live-filters"),a=e.attributes.posttype.value,n=parseInt(e.attributes.limit.value),c=o?JSON.parse(o.attributes.filters.value):void 0,u=s?s.attributes.content.value:"Load more",p=o?o.attributes.layout.value:"select",m=!o||"1"===o.attributes.hideempty.value,h=(0,l.getQueryArgs)(window.location.href),y={};Object.keys(c).forEach(e=>{h[e]&&(y[e]=h[e].split(","))}),(0,r.createRoot)(t).render((0,i.jsx)(d,{liveMore:s,liveFilters:o,filters:c,initFilters:y,postType:a,limit:n,moreLabel:u,layout:p,hideEmpty:m}))}}),new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{"IMG"===e.tagName&&(e.complete?u(e):e.addEventListener("load",()=>u(e))),e.querySelectorAll&&e.querySelectorAll("img").forEach(e=>{e.complete?u(e):e.addEventListener("load",()=>u(e))})})})}).observe(document.body,{childList:!0,subtree:!0})})()})();