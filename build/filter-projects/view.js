(()=>{"use strict";var e={n:s=>{var t=s&&s.__esModule?()=>s.default:()=>s;return e.d(t,{a:t}),t},d:(s,t)=>{for(var a in t)e.o(t,a)&&!e.o(s,a)&&Object.defineProperty(s,a,{enumerable:!0,get:t[a]})},o:(e,s)=>Object.prototype.hasOwnProperty.call(e,s)};const s=window.wp.domReady;var t=e.n(s);const a=window.wp.element,r=window.wp.apiFetch;var i=e.n(r);const n=window.wp.url,l=window.ReactJSXRuntime,o=({postType:e,filters:s,restEndpoint:t,limit:r,moreButton:o,showFilter:c,showProjectsLink:d,initService:p,initIndustry:u})=>{const[h,m]=(0,a.useState)([]),[x,v]=(0,a.useState)(!1),[g,j]=(0,a.useState)(null),[y,f]=(0,a.useState)(p),[w,b]=(0,a.useState)(u),[N,S]=(0,a.useState)(1),[k,_]=(0,a.useState)(1),[L,E]=(0,a.useState)(0),[I,O]=(0,a.useState)(!1),[F,P]=(0,a.useState)(!0),[R,T]=(0,a.useState)({}),A=r||6;(0,a.useEffect)(()=>{Q(),v(!0)},[]),(0,a.useEffect)(()=>{e&&x&&q(1,!1)},[g]);const Q=async()=>{let e={};s&&(e.taxonomies=s.split(",")),i()({path:(0,n.addQueryArgs)("/everything-filter/v1/terms",e)}).then(e=>{j(e.taxonomyTerms)})},q=async(s=1,t=!1)=>{O(!0);const a=document.body.classList.contains("single"),r=document.body.attributes.class.value.match(/postid-(\d+)/);try{const t={};Object.keys(g).map(e=>{t[e]=[],g[e].forEach(s=>{1===s.selected&&t[e].push(s.slug)})});const l={page:s,per_page:A,post_type:e,...a&&r&&{exclude:r[1]},tax_query:t};i()({path:(0,n.addQueryArgs)("everything-filter/v1/posts",l)}).then(e=>{_(parseInt(e.total_pages)),E(parseInt(e.total)),S(s),P(!1),m(e.posts)})}catch(e){console.error("Error fetching posts:",e)}finally{O(!1)}},B=N<k;return(0,l.jsxs)("div",{className:`posts-filters-container posts-limit-${A}`,children:[(c||d)&&(0,l.jsx)("div",{className:"posts-header",children:c&&g&&(0,l.jsx)("div",{className:"posts-filters-controls",children:(0,l.jsxs)("div",{className:"filter-group",children:[!F&&(0,l.jsxs)("span",{className:"posts-results",children:["Showing ",h.length," posts in"]}),Object.keys(g).map(e=>(0,l.jsxs)("div",{className:"filter-dropdown filter-dropdown-"+e,children:[(0,l.jsx)("span",{className:"filter-label",children:"Select an option"}),g[e].map(s=>(0,l.jsxs)("label",{children:[(0,l.jsx)("input",{type:"checkbox",onChange:()=>((e,s,t)=>{S(1);const a={};a[e]=g[e].map(e=>e.slug===s?{...e,selected:t?1:0}:e),j({...g,...a})})(e,s.slug,!s.selected),checked:1===s.selected,value:"1"}),s.name]}))]}))]})})}),I&&0===h.length?(0,l.jsx)("div",{className:"post-loading",children:(0,l.jsx)("p",{children:"Loading posts..."})}):0===h.length?(0,l.jsx)("div",{className:"post-no-results",children:(0,l.jsx)("p",{children:"No posts found matching your criteria."})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"post-grid",children:h.map(e=>(0,l.jsxs)("div",{className:"post-card",children:[e.featured_image&&(0,l.jsx)("div",{className:"post-image",children:(0,l.jsxs)("a",{href:e.link,children:[(0,l.jsx)("img",{src:e.featured_image,alt:e.title,className:R[e.id]?"has-loaded":"",loading:"lazy",onLoad:()=>{return s=e.id,void T(e=>({...e,[s]:!0}));var s}}),e.featured_media]})}),(0,l.jsxs)("div",{className:"post-content",children:[(0,l.jsx)("h6",{className:"post-title",children:(0,l.jsx)("a",{href:e.link,children:e.title})}),e.excerpt&&(0,l.jsx)("div",{className:"post-excerpt",dangerouslySetInnerHTML:{__html:e.excerpt}}),(0,l.jsx)("a",{href:e.link,className:"post-link",children:(0,l.jsx)("span",{className:"label",children:"explore the post"})})]})]},e.id))}),o&&B&&(0,l.jsxs)("div",{className:"post-load-more",children:[(0,l.jsx)("button",{onClick:()=>{N<k&&q(N+1,!0)},disabled:I,className:"load-more-btn",children:I?"Loading...":"show more posts"}),(0,l.jsxs)("p",{children:["Showing ",h.length," out of ",L," posts"]})]})]})]})};t()(()=>{const e=document.querySelector(".wp-block-six-character-media-everything-filter"),s=(0,a.createRoot)(e),t=e.attributes.posttype.value,r=e.attributes.filters.value,i=e.attributes.restendpoint.value,c=parseInt(e.attributes.limit.value),d="1"===e.attributes.morebutton.value,p="1"===e.attributes.showfilters.value,u="1"===e.attributes.showprojectslink.value,h=(0,n.getQueryArgs)(window.location.href),m=h.service?h.service:"",x=h.industry?h.industry:"";s.render((0,l.jsx)(o,{postType:t,filters:r,restEndpoint:i,limit:c,moreButton:d,showFilter:p,showProjectsLink:u,initService:m,initIndustry:x}))})})();