(()=>{var e={942:(e,t)=>{var s;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var s=arguments[t];s&&(e=n(e,a(s)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var s in e)r.call(e,s)&&e[s]&&(t=n(t,s));return t}function n(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):void 0===(s=function(){return o}.apply(t,[]))||(e.exports=s)}()}},t={};function s(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,s),a.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var r in t)s.o(t,r)&&!s.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.domReady;var t=s.n(e);const r=window.wp.element,o=window.wp.apiFetch;var a=s.n(o);const n=window.wp.url;var l=s(942),i=s.n(l);const c=window.ReactJSXRuntime,d=({postType:e,filters:t,filterlabels:s,limit:o,moreButton:l,showFilter:d,showProjectsLink:u})=>{const[p,h]=(0,r.useState)([]),[m,f]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[g,b]=(0,r.useState)({}),[x,w]=(0,r.useState)(1),[j,S]=(0,r.useState)(1),[N,k]=(0,r.useState)(0),[O,E]=(0,r.useState)(!1),[L,A]=(0,r.useState)(!0),_=o||6;(0,r.useEffect)(()=>{P(),f(!0)},[]),(0,r.useEffect)(()=>{e&&m&&I(1,!1)},[v]);const P=async()=>{let e={};t&&(e.taxonomies=t.split(",")),a()({path:(0,n.addQueryArgs)("/everything-filter/v1/terms",e)}).then(e=>{y(e.taxonomyTerms),b(Object.fromEntries(Object.keys(e.taxonomyTerms).map(e=>[e,!1])))})},I=async(t=1,s=!1)=>{console.log("fetchPosts"),E(!0);const r=document.body.classList.contains("single"),o=document.body.attributes.class.value.match(/postid-(\d+)/);try{const s={};Object.keys(v).map(e=>{s[e]=[],v[e].forEach(t=>{1===t.selected&&s[e].push(t.slug)})});const l={page:t,per_page:_,post_type:e,...r&&o&&{exclude:o[1]},tax_query:s};a()({path:(0,n.addQueryArgs)("everything-filter/v1/posts",l)}).then(e=>{S(parseInt(e.total_pages)),k(parseInt(e.total)),w(t),A(!1),h(1===t?e.posts:[...p,...e.posts])})}catch(e){console.error("Error fetching posts:",e)}finally{E(!1)}},T=x<j;return(0,c.jsxs)("div",{className:i()(`posts-filters-container posts-limit-${_}`,{"is-loaded":!L}),children:[(d||u)&&(0,c.jsx)("div",{className:"posts-header",children:d&&v&&(0,c.jsx)("div",{className:"posts-filters-controls",children:(0,c.jsxs)("div",{className:"filter-group",children:[!L&&(0,c.jsxs)("span",{className:"posts-results",children:["Showing ",p.length," posts in"]}),Object.keys(v).map(e=>(0,c.jsxs)("div",{className:i()("filter-dropdown",[`filter-dropdown-${e}`],{"filter-expanded":g[e]}),children:[(0,c.jsx)("button",{className:"filter-label",onClick:()=>b({...g,[e]:!g[e]}),children:s[e]?s[e]:"Select an option"}),!0===g[e]&&(0,c.jsx)("div",{className:"dropdown",children:v[e].map(t=>(0,c.jsxs)("label",{children:[(0,c.jsx)("span",{className:"checkbox-wrapper",children:(0,c.jsx)("input",{type:"checkbox",onChange:()=>((e,t,s)=>{w(1);const r={};r[e]=v[e].map(e=>e.slug===t?{...e,selected:s?1:0}:e),y({...v,...r}),(e=>{const t={},s={...v,...e};Object.keys(s).map(e=>{t[e]=[],s[e].forEach(s=>{1===s.selected&&(t[e]=0===t[e].length?s.slug:t[e]+","+s.slug)})});const r=(0,n.addQueryArgs)((0,n.removeQueryArgs)(window.location.href,"service","industry"),t);window.history.pushState({},"Page",r)})({...r})})(e,t.slug,!t.selected),checked:1===t.selected,value:"1"})}),t.name]}))})]}))]})})}),O&&0===p.length?(0,c.jsx)("div",{className:"post-loading",children:(0,c.jsx)("p",{children:"Loading posts..."})}):0===p.length?(0,c.jsx)("div",{className:"post-no-results",children:(0,c.jsx)("p",{children:"No posts found matching your criteria."})}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("div",{className:"post-grid",children:p.map(t=>(0,c.jsx)("div",{className:"post-card type-"+e,dangerouslySetInnerHTML:{__html:t.formatted}}))}),l&&T&&(0,c.jsxs)("div",{className:"post-load-more",children:[(0,c.jsx)("button",{onClick:()=>{x<j&&I(x+1,!0)},disabled:O,className:"load-more-btn",children:O?"Loading...":"show more posts"}),(0,c.jsxs)("p",{children:["Showing ",p.length," out of ",N," posts"]})]})]})]})};function u(e){e.classList.add("has-loaded")}t()(()=>{const e=document.querySelector(".wp-block-six-character-media-everything-filter"),t=e.attributes.posttype.value,s=e.attributes.filters.value,o=parseInt(e.attributes.limit.value),a="1"===e.attributes.morebutton.value,n="1"===e.attributes.showfilters.value,l="1"===e.attributes.showprojectslink.value,i=JSON.parse(e.attributes.filterlabels.value);(0,r.createRoot)(e).render((0,c.jsx)(d,{postType:t,filters:s,limit:o,moreButton:a,showFilter:n,showProjectsLink:l,filterlabels:i}))}),new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{"IMG"===e.tagName&&(e.complete?u(e):e.addEventListener("load",()=>u(e))),e.querySelectorAll&&e.querySelectorAll("img").forEach(e=>{e.complete?u(e):e.addEventListener("load",()=>u(e))})})})}).observe(document.body,{childList:!0,subtree:!0})})()})();